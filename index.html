<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pozdrawiam Dawida Gr</title>
    <style>
        /* --- GÅÃ“WNE STYLE I RESET --- */
        :root {
            --dark-bg: #1a1a1a;
            --main-text: #f0f0f0;
            --yellow: #ffd700;
            --dark-yellow: #e6c200;
            --darker-bg: #111;
            --red: #e74c3c;
            --green: #2ecc71;
            --border-radius: 8px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        }

        body {
            background-color: var(--dark-bg);
            color: var(--main-text);
            overflow: hidden;
        }

        /* --- NAWIGACJA --- */
        nav {
            position: fixed; top: 0; left: 0; width: 100%;
            background-color: var(--darker-bg);
            display: flex; justify-content: space-between; align-items: center;
            padding: 10px 20px; z-index: 1000;
        }
        nav a {
            color: var(--main-text); text-decoration: none; padding: 8px 15px;
            font-weight: bold; border-radius: var(--border-radius); transition: background-color 0.3s;
        }
        nav a:hover { background-color: rgba(255, 255, 255, 0.1); }

        /* --- EKRANY APLIKACJI --- */
        .screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            padding: 80px 20px 20px; text-align: center;
            opacity: 0; visibility: hidden; transition: opacity 0.5s, visibility 0.5s;
            overflow-y: auto;
        }
        .screen.active { opacity: 1; visibility: visible; z-index: 100; }
        /* POPRAWKA PRZYCIÄ˜CIA */
        #screen-profiles, #screen-ukochani {
             justify-content: flex-start;
        }

        /* --- ELEMENTY INTERFEJSU --- */
        h1 { font-size: 2.5rem; margin-bottom: 10px; }
        h2 { font-size: 2rem; color: var(--yellow); margin-bottom: 20px; }
        h3 { font-size: 1.5rem; margin-bottom: 5px; }
        p { font-size: 1.2rem; max-width: 600px; margin-bottom: 30px; line-height: 1.6; }
        .small-text { font-size: 1rem; color: #aaa; }
        .button {
            background-color: var(--yellow); color: var(--dark-bg); border: none;
            padding: 15px 30px; font-size: 1.2rem; font-weight: bold;
            border-radius: var(--border-radius); cursor: pointer; transition: background-color 0.3s, transform 0.2s;
            margin: 10px; border: 2px solid var(--yellow); position: relative; z-index: 2;
        }
        .button:hover { background-color: var(--dark-yellow); transform: scale(1.05); }
        .button:disabled { background-color: #555; color: #999; border-color: #555; cursor: not-allowed; transform: none; }
        .button.secondary { background-color: transparent; color: var(--yellow); }

        /* --- LANDING PAGE ANIMACJE --- */
        .flying-heart {
            position: fixed; font-size: 1.5rem; color: var(--yellow);
            opacity: 0.7; pointer-events: none; z-index: 1;
            animation: fly-to-button 8s linear infinite;
        }
        @keyframes fly-to-button {
            0% { transform: translate(0, 0) scale(0.5); opacity: 0; }
            10% { opacity: 0.7; }
            90% { opacity: 0.7; }
            100% { transform: var(--tx) var(--ty) scale(1); opacity: 0; }
        }

        /* --- KATEGORIE I KAFELKI --- */
        .category-box { background-color: var(--darker-bg); padding: 30px; margin: 15px 0; border-radius: var(--border-radius); border: 2px solid transparent; cursor: pointer; transition: border-color 0.3s; max-width: 500px; width: 90%; }
        .category-box:hover { border-color: var(--yellow); }
        .category-box p { margin-bottom: 0; font-size: 1rem; color: #ccc; }

        .profile-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; width: 100%; max-width: 1200px; padding: 20px; }
        .profile-card { background-color: var(--darker-bg); border-radius: var(--border-radius); overflow: hidden; border: 2px solid transparent; transition: border-color 0.3s; display: flex; flex-direction: column; cursor: pointer; }
        .profile-card:hover { border-color: var(--yellow); }
        .profile-card img { width: 100%; height: 300px; object-fit: cover; }
        .img-placeholder { width: 100%; height: 300px; background-color: #333; color: #888; display: flex; justify-content: center; align-items: center; font-style: italic; }
        .profile-card-content { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; text-align: left; }
        .profile-card-content .nickname { color: var(--yellow); font-weight: bold; font-size: 1.2rem; margin-bottom: 10px; }
        .profile-card-content .separator { border: none; height: 2px; width: 40px; background-color: var(--yellow); margin: 10px 0 15px 0; }
        .profile-card-content .details span { display: block; margin-bottom: 5px; font-size: 0.9rem; color: #aaa; }
        .profile-card-content .quote { font-style: italic; color: #ccc; margin-bottom: 15px; flex-grow: 1; }
        .life-quote { font-weight: bold; font-style: normal !important; background: linear-gradient(45deg, var(--yellow), var(--main-text)); -webkit-background-clip: text; background-clip: text; color: transparent; }
        .profile-card-actions { display: flex; justify-content: space-between; align-items: center; margin-top: 20px; }
        .heart-button { background: none; border: none; cursor: pointer; padding: 10px; position: relative; }
        .heart-icon { font-size: 2rem; color: var(--main-text); transition: color 0.3s, transform 0.3s; }
        .heart-icon.loved { color: transparent; background-image: linear-gradient(45deg, #f06, #f79, #06f, #79f, #0f6, #7f9); -webkit-background-clip: text; background-clip: text; transform: scale(1.2); }
        
        .conversion-card {
            background: linear-gradient(45deg, #222, #111);
            border: 2px dashed var(--yellow); padding: 20px;
            display: flex; flex-direction: column; justify-content: center;
            align-items: center; text-align: center;
        }
        .conversion-card h3 { color: var(--yellow); }
        .conversion-card p { font-size: 0.9rem; color: #ccc; margin-bottom: 20px; }

        /* --- POKÃ“J NAWRÃ“CEÅƒ --- */
        #screen-conversion { overflow: hidden; }
        .marching-heart { position: fixed; font-size: 2.5rem; animation: march-across 15s linear infinite; pointer-events: none; }
        @keyframes march-across-1 { 0% { left: -5vw; top: 10vh; transform: rotate(20deg); } 100% { left: 105vw; top: 90vh; transform: rotate(20deg); } }
        @keyframes march-across-2 { 0% { left: 105vw; top: 20vh; transform: rotate(-160deg); } 100% { left: -5vw; top: 80vh; transform: rotate(-160deg); } }
        @keyframes march-across-3 { 0% { top: -5vh; left: 80vw; transform: rotate(110deg); } 100% { top: 105vh; left: 20vw; transform: rotate(110deg); } }

        /* --- EKRANY WIDEO, POÅÄ„CZEÅƒ, MODALI --- */
        #screen-video-call .message-container { max-width: 80%; }
        #screen-video-call .message { padding: 15px 20px; border-radius: 18px; line-height: 1.4; background-color: #333; border-bottom-left-radius: 4px; }
        #video-player-container { width: 100%; max-width: 800px; margin-top: 20px; z-index: 10; }
        #video-player-container iframe { aspect-ratio: 16 / 9; width: 100%; border: none; }
        .call-screen-ui { background-color: #000; border-radius: 20px; padding: 50px; display: flex; flex-direction: column; align-items: center; max-width: 400px; width: 90%; }
        .call-screen-ui img { width: 150px; height: 150px; border-radius: 50%; object-fit: cover; border: 4px solid var(--yellow); margin-bottom: 20px; }
        .call-screen-ui .nickname { font-size: 2rem; font-weight: bold; }
        .call-screen-ui .status { color: #aaa; font-size: 1.2rem; margin-bottom: 40px; }
        .call-buttons { display: flex; justify-content: space-around; width: 100%; }
        .call-btn { width: 70px; height: 70px; border-radius: 50%; border: none; cursor: pointer; display: flex; justify-content: center; align-items: center; }
        .call-btn svg { width: 35px; height: 35px; fill: white; }
        .call-btn.accept { background-color: var(--green); }
        .call-btn.reject { background-color: var(--red); }
        .call-btn.reject svg { stroke: white; stroke-width: 5; fill: none; }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); display: flex; justify-content: center; align-items: center; z-index: 2000; opacity: 0; visibility: hidden; transition: opacity 0.3s; }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        .modal-content { background-color: var(--darker-bg); padding: 30px; border-radius: var(--border-radius); text-align: center; max-width: 400px; width: 90%; }
        .modal-content p { margin-bottom: 25px; }
        .modal-content .button { display: block; width: 100%; margin-bottom: 10px; }

        /* --- EKRAN CZATU --- */
        #screen-chat { padding-top: 50px; }
        #chat-screen-content { width: 100%; max-width: 800px; height: 100%; display: flex; flex-direction: column; background-color: var(--darker-bg); border-radius: var(--border-radius) var(--border-radius) 0 0; }
        .chat-header { display: flex; align-items: center; padding: 10px 15px; border-bottom: 1px solid #333; background-color: #222; flex-shrink: 0; }
        .chat-header img { width: 45px; height: 45px; border-radius: 50%; object-fit: cover; margin-right: 15px; }
        .chat-header-info .name { font-weight: bold; }
        .chat-header-info .status { font-size: 0.8rem; color: var(--green); }
        #chat-messages { flex-grow: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column-reverse; }
        .message-container { display: flex; margin-bottom: 15px; max-width: 80%; position: relative; }
        .message { padding: 10px 15px; border-radius: 18px; line-height: 1.4; }
        .bot-message-container { align-items: flex-start; flex-direction: row; align-items: flex-end; }
        .bot-message-container .chat-avatar { width: 35px; height: 35px; border-radius: 50%; object-fit: cover; margin-right: 10px; flex-shrink: 0; }
        .bot-message { background-color: #333; border-bottom-left-radius: 4px; }
        .user-message-container { align-self: flex-end; }
        .user-message { background-color: var(--yellow); color: var(--dark-bg); border-bottom-right-radius: 4px; }
        .chat-input-area { display: flex; padding: 10px; border-top: 1px solid #333; flex-shrink: 0; }
        #chat-input { flex-grow: 1; background-color: #333; border: none; border-radius: var(--border-radius); padding: 15px; color: var(--main-text); font-size: 1rem; }
        #send-button { margin-left: 10px; padding: 0 25px; }
        .chat-particle { position: absolute; font-size: 1.2rem; pointer-events: none; animation: message-explode 2.5s cubic-bezier(0.1, 0.8, 0.7, 1) forwards; }
        @keyframes message-explode { 0% { transform: scale(1); opacity: 1; } 100% { transform: var(--tx) var(--ty) scale(0); opacity: 0; } }

        /* --- EKRAN BANA --- */
        #chat-ban-full-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(26, 26, 26, 0.95); z-index: 1001; display: none; flex-direction: column; justify-content: center; align-items: center; }
        .ban-circle-container { position: relative; width: 250px; height: 250px; margin-bottom: 20px; animation: rotate-circle 20s linear infinite; }
        .ban-emoji { position: absolute; font-size: 2rem; transform-origin: center center; }
        @keyframes rotate-circle { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .ban-text { font-size: 3rem; font-weight: bold; color: var(--yellow); margin-bottom: 30px; }
        #audio-player-container { display: none; }

        /* --- RESPONSIVE DESIGN --- */
        @media (max-width: 600px) {
            h1 { font-size: 2rem; } h2 { font-size: 1.5rem; } p { font-size: 1rem; }
            .button { padding: 12px 25px; font-size: 1rem; }
            #chat-screen-content, #screen-chat { border-radius: 0; padding-top: 50px; }
        }
    </style>
</head>
<body>
    <div id="landing-page-hearts"></div>
    <div id="audio-player-container"></div>
    
    <nav>
        <a href="#" id="nav-back">Cofnij</a>
        <a href="#" id="nav-home">Home</a>
        <a href="#" id="nav-ukochani">Ukochani</a>
    </nav>
    
<div id="screen-landing" class="screen active">
  <p class="small-text">Artur Kudlik Przedstawia ğŸ”¥</p>
  <h1>Randki dla nastolatkÃ³w</h1>
  <p>RÃ³Å¼ne tryby - Pojedyncza, w ciemno, mieszana, trÃ³jkÄ…tna, typ taki Å¼e spotykacie siÄ™ o 23:30</p>
  <button id="main-enter-button" class="button" data-target="screen-categories">WchodzÄ™ w to!</button>
</div>

<!-- Stopka z napisem -->
<div id="footer-note">Ta strona to Å¼art i nie ma na celu nikogo uraziÄ‡</div>

<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
  }

  .screen {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
  }

  #footer-note {
    position: fixed;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 13px;
    color: #ccc;          /* znacznie jaÅ›niejszy szary */
    opacity: 1;           /* peÅ‚na widocznoÅ›Ä‡ */
    transition: opacity 0.3s ease;
  }

  #footer-note.hidden {
    opacity: 0;
    pointer-events: none;
  }

  .button {
    margin-top: 10px;
    padding: 12px 24px;   /* wiÄ™kszy przycisk */
    font-size: 18px;      /* wiÄ™kszy font */
    background-color: #FFD700;  /* Å¼Ã³Å‚ty kolor */
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.1s ease;
  }

  .button:hover {
    background-color: #FFC300;
    transform: scale(1.05);
  }
</style>

<script>
  document.getElementById('main-enter-button').addEventListener('click', function() {
    document.getElementById('footer-note').classList.add('hidden');
  });
</script>
<script>
  document.getElementById('main-enter-button').addEventListener('click', function() {
    const footer = document.getElementById('footer-note');
    footer.classList.add('hidden');
  });
</script>
    <div id="screen-categories" class="screen">
        <h2>Jaki masz typ?</h2>
        <div class="category-box" data-category="solidni">
            <h3>Solidni i rozkochani</h3>
            <p>chÅ‚opaki, ktÃ³rzy wiedzÄ…, co robiÄ…. Nie tylko poÅ‚oÅ¼Ä… kafelki, ale teÅ¼ podbijÄ… Twoje serce swoimi umiejÄ™tnoÅ›ciami..</p>
        </div>
        <div class="category-box" data-category="kreatywni">
            <h3>Kreatywni i smaczni</h3>
            <p>ArtyÅ›ci kuchni, ktÃ³rzy potrafiÄ… rozkochaÄ‡ CiÄ™ w jedzeniu. Ich dania smakujÄ… jak miÅ‚oÅ›Ä‡ od pierwszego kÄ™sa..</p>
        </div>
        <div class="category-box" data-category="wszechstronni">
            <h3>Wszechstronni i elastyczni</h3>
            <p>Fachowcy, ktÃ³rzy potrafiÄ… i zbudowaÄ‡, i ugotowaÄ‡. Idealni dla tych, ktÃ³rzy chcÄ… Karola KocembÄ™ ale wstydzÄ… siÄ™ podbiÄ‡..</p>
        </div>
    </div>

    <div id="screen-profiles" class="screen">
        <div id="profiles-container" class="profile-grid"></div>
    </div>
    
    <div id="screen-confirmation" class="screen">
        <h2 id="confirmation-text"></h2>
        <p id="confirmation-subtext"></p>
        <div>
            <button class="button" id="btn-polacz-sie">POÅÄ„CZ SIÄ˜</button>
            <button class="button secondary" id="btn-wtrashe-pisac">WOLÄ˜ PISAÄ†</button>
        </div>
    </div>
    
    <div id="screen-incoming-call" class="screen">
       <div class="call-screen-ui">
            <img id="call-img" src="" alt="">
            <div id="call-nickname" class="nickname"></div>
            <div class="status">do ciebie dzwoni...</div>
            <div class="call-buttons">
                <button class="call-btn reject" id="btn-reject-call"><svg viewBox="0 0 32 32"><line x1="2" y1="30" x2="30" y2="2"></line><line x1="2" y1="2" x2="30" y2="30"></line></svg></button>
                <button class="call-btn accept" id="btn-accept-call"><svg viewBox="0 0 24 24"><path d="M6.62,10.79C8.06,13.62 10.38,15.94 13.21,17.38L15.41,15.18C15.69,14.9 16.08,14.82 16.43,14.93C17.55,15.3 18.75,15.5 20,15.5A1,1 0 0,1 21,16.5V20A1,1 0 0,1 20,21A17,17 0 0,1 3,4A1,1 0 0,1 4,3H7.5A1,1 0 0,1 8.5,4C8.5,5.25 8.7,6.45 9.07,7.57C9.18,7.92 9.1,8.31 8.82,8.59L6.62,10.79Z"></path></svg></button>
            </div>
       </div>
    </div>

    <div id="screen-video-call" class="screen">
        <div class="message-container"><div id="video-message-text" class="message"></div></div>
        <div id="video-player-container">
            <iframe id="youtube-player" data-src="https://www.youtube.com/embed/yHAhqiyauhE?si=hJVvmT5FLQzs792Z" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        </div>
        <div>
            <button class="button" id="btn-go-to-chat">PrzejdÅº do czatu</button>
            <button class="button secondary" id="btn-end-call">ZakoÅ„cz rozmowÄ™</button>
        </div>
    </div>
    
    <div id="screen-chat" class="screen">
        <div id="chat-screen-content">
            <div class="chat-header">
                <img id="chat-header-img" src="" alt="">
                <div class="chat-header-info">
                    <div id="chat-header-name" class="name"></div>
                    <div class="status">aktywny teraz</div>
                </div>
            </div>
            <div id="chat-messages"></div>
            <div class="chat-input-area">
                <input type="text" id="chat-input" placeholder="Napisz wiadomoÅ›Ä‡...">
                <button class="button" id="send-button">WyÅ›lij</button>
            </div>
        </div>
    </div>

    <div id="chat-ban-full-overlay">
        <div class="ban-circle-container" id="ban-circle"></div>
        <div class="ban-text">bywa</div>
        <button class="button" id="btn-find-new">ZnajdÅº nowego fachowca</button>
        <button class="button secondary" id="btn-play-music">PuÅ›Ä‡ muzykÄ™</button>
    </div>
    
    <div id="screen-conversion" class="screen">
        <div id="conversion-hearts-container"></div>
        <div id="video-player-container">
            <iframe id="conversion-video-player" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        </div>
    </div>
    
    <div id="screen-ukochani" class="screen">
        <div id="ukochani-empty" style="display: none; flex-direction: column;">
            <h2>Twoja lista jest pusta</h2>
            <p>Nie dodaÅ‚aÅ› jeszcze Å¼adnego chÅ‚opaka, ale moÅ¼esz to zrobiÄ‡!</p>
            <button class="button" id="btn-znajdz-chlopaka">Tutaj</button>
        </div>
        <div id="ukochani-list-container" class="profile-grid"></div>
    </div>
    
    <div id="modal-reject" class="modal-overlay">
        <div class="modal-content">
            <h3>Czy na pewno chcesz odrzuciÄ‡ takiego MÄ™skiego chÅ‚opa?</h3>
            <p id="rejection-argument"></p>
            <button class="button" id="btn-call-again">ZadzwoÅ„ ponownie</button>
            <button class="button secondary" id="btn-prefer-write">WolÄ™ pisaÄ‡</button>
            <button class="button secondary" id="btn-im-shy">WstydzÄ™ siÄ™</button>
        </div>
    </div>
    
    <div id="modal-shy" class="modal-overlay">
        <div class="modal-content">
            <h2>Do odwaÅ¼nych Å›wiat naleÅ¼y ğŸ’ª</h2>
            <button class="button" id="btn-back-to-call">WrÃ³Ä‡ do poÅ‚Ä…czenia</button>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

const profiles = [
    { id: 1, name: 'Grzegorz Kowalczyk', nickname: 'Fred', age: 'ğŸ‚ 40', education: 'ğŸ“ Kurs Å›lusarstwa, reszta to szkoÅ‚a Å¼ycia', quote: 'Fred na usÅ‚ugi! SpecjalizujÄ™ siÄ™ w spawaniu, ale potrafiÄ™ teÅ¼... no, powiedzmy, Å¼e umiem Å‚Ä…czyÄ‡ rÃ³Å¼ne elementy w harmonijnÄ… caÅ‚oÅ›Ä‡.', category: 'solidni', image: 'foty/man1.jpg', lifeQuote: '"Najpierw poÅ‚oÅ¼Ä™ kafelki, a potem kres szkolnej propagandzie."', confirmationBlurb: 'to mistrz spawarki. Z nim kaÅ¼da relacja bÄ™dzie trwaÅ‚a i nierozerwalna.' },
    { id: 2, name: 'Andrzej Zawadzki', nickname: 'MÅ‚otek', age: 'ğŸ‚ 45', education: 'ğŸ“ Jedna klasa zawodÃ³wki samochodowej', quote: 'Jak coÅ› siÄ™ zepsuje, to ja to naprawiÄ™. Jak siÄ™ nie da naprawiÄ‡, to znaczy, Å¼e trzeba byÅ‚o mocniej uderzyÄ‡. Proste.', category: 'solidni', image: 'foty/man2.jpg', lifeQuote: '"Ona nie musi byÄ‡ piÄ™kna."', confirmationBlurb: 'to krÃ³l mÅ‚ota. Z nim kaÅ¼dy gwÃ³ÅºdÅº zostanie wbity prosto i z finezjÄ….' },
    { id: 3, name: 'Krzysztof Malinowski', nickname: 'Betoniarz', age: 'ğŸ‚ 38', education: 'ğŸ“ Technik budownictwa, bez matury', quote: 'Moje serce jest jak dobrze wymieszany beton - twarde, solidne i gotowe na lata. Szukam kogoÅ›, kto doceni mocny fundament.', category: 'solidni', image: 'foty/man3.jpg', lifeQuote: '"Wiem, Å¼e nic nie wiem."', confirmationBlurb: 'to twardziel o goÅ‚Ä™bim sercu. On nie buduje zamkÃ³w z piasku, on wylewa fundamenty pod paÅ‚ac.' },
    { id: 4, name: 'Marian PaÅºdzioch', nickname: 'Wiertara', age: 'ğŸ‚ 52', education: 'ğŸ“ Dyplom mistrzowski w cechu rzemiosÅ‚ rÃ³Å¼nych', quote: 'Å»ycie jest jak Å›ciana z wielkiej pÅ‚yty, czasem trzeba uÅ¼yÄ‡ udaru, Å¼eby siÄ™ przebiÄ‡. Mam wiertarkÄ™ i nie zawaham siÄ™ jej uÅ¼yÄ‡.', category: 'solidni', image: 'foty/man4.jpg', lifeQuote: '"Lepiej mieÄ‡ udar w wiertarce niÅ¼ w gÅ‚owie."', confirmationBlurb: 'przewierci siÄ™ przez kaÅ¼dy problem. Z nim Å¼adna Å›ciana nie stanie wam na drodze do szczÄ™Å›cia.' },
    { id: 5, name: 'Damian Igielski', nickname: 'SÅ‚odki', age: 'ğŸ‚ 33', education: 'ğŸ“ Technik technologii Å¼ywienia, dorabia jako projektant', quote: 'ProjektujÄ™ torty, ktÃ³re wyglÄ…dajÄ… jak dzieÅ‚a sztuki i smakujÄ… jeszcze lepiej. Z TobÄ… chciaÅ‚bym zaprojektowaÄ‡ coÅ› na caÅ‚e Å¼ycie.', category: 'kreatywni', image: 'foty/man5.jpg', lifeQuote: '"Å»ycie jest za krÃ³tkie na dietÄ™."', confirmationBlurb: 'osÅ‚odzi Ci Å¼ycie. Z nim kaÅ¼dy dzieÅ„ bÄ™dzie smakowaÅ‚ jak ulubiony deser.' },
    { id: 6, name: 'Patryk Bochenek', nickname: 'Zakwas', age: 'ğŸ‚ 41', education: 'ğŸ“ SzkoÅ‚a branÅ¼owa Cosinus - piekarz', quote: 'Jestem cierpliwy jak zakwas, ktÃ³ry roÅ›nie przez caÅ‚Ä… noc. Daj mi trochÄ™ ciepÅ‚a, a stworzÄ™ dla Ciebie coÅ› pysznego.', category: 'kreatywni', image: 'foty/man6.jpg', lifeQuote: '"Dobry chleb jest podstawÄ…, reszta to dodatki."', confirmationBlurb: 'to mistrz cierpliwoÅ›ci. Daj mu trochÄ™ czasu, a upiecze dla ciebie chleb... i wspÃ³lnÄ… przyszÅ‚oÅ›Ä‡.' },
    { id: 7, name: 'Bartosz Heise', nickname: 'Croissant', age: 'ğŸ‚ 29', education: 'ğŸ“ Technik fryzjerstwa z doÅ›wiadczeniem w gastronomii', quote: 'Moje Å¼ycie ma wiÄ™cej warstw niÅ¼ idealny croissant. Odkryjmy je razem, jedna po drugiej.', category: 'kreatywni', image: 'foty/man7.jpg', lifeQuote: '"W Å¼yciu jak we wÅ‚osach - czasem trzeba coÅ› zakrÄ™ciÄ‡."', confirmationBlurb: 'jest wielowarstwowy jak jego ulubione ciasto. KaÅ¼dego dnia odkryjesz w nim coÅ› nowego i zaskakujÄ…cego.' },
    { id: 8, name: 'Sebastian Macierewicz', nickname: 'Kruszonka', age: 'ğŸ‚ 35', education: 'ğŸ“ Absolwent liceum plastycznego', quote: 'RzeÅºbiÄ™ w glinie, ale najlepiej wychodzi mi lepienie pierogÃ³w. Jestem artystÄ… w kuchni i poza niÄ…. Posypmy nasze Å¼ycie kruszonkÄ… szczÄ™Å›cia.', category: 'kreatywni', image: 'foty/man8.jpg', lifeQuote: '"Sztuka jest wszÄ™dzie, nawet w pierogach."', confirmationBlurb: 'jest artystÄ… duszy i podniebienia. Z nim Å¼ycie nabierze barw i smaku.' },
    { id: 9, name: 'Tomasz Hajto', nickname: 'Trytyt', age: 'ğŸ‚ 39', education: 'ğŸ“ Technik informatyk, ktÃ³ry woli pracÄ™ fizycznÄ…', quote: 'Nie ma problemu, ktÃ³rego nie da siÄ™ rozwiÄ…zaÄ‡ trytytkÄ… albo srebrnÄ… taÅ›mÄ…. Jestem elastyczny i mocno trzymam. Jak trytytka.', category: 'wszechstronni', image: 'foty/man9.jpg', lifeQuote: '"Jak siÄ™ trzyma, to nie ruszaÄ‡."', confirmationBlurb: 'to czÅ‚owiek-orkiestra. Z nim wszystko bÄ™dzie siÄ™ trzymaÄ‡ mocno i pewnie.' },
    { id: 10, name: 'Robert Borkowski', nickname: 'Francuz', age: 'ğŸ‚ 48', education: 'ğŸ“ Technik mechanik, samouk hydrauliki', quote: 'DopasujÄ™ siÄ™ do kaÅ¼dej sytuacji, jak klucz francuski do kaÅ¼dej Å›ruby. Skomplikowane? Dla mnie to wyzwanie!', category: 'wszechstronni', image: 'foty/man10.jpg', lifeQuote: '"KaÅ¼dy problem ma swÃ³j rozmiar klucza."', confirmationBlurb: 'dopasuje siÄ™ do kaÅ¼dej sytuacji. Z nim Å¼aden problem nie jest zbyt skomplikowany.' },
    { id: 11, name: 'Cezary Koszkul', nickname: 'Guma', age: 'ğŸ‚ 31', education: 'ğŸ“ Technik reklamy, instruktor na siÅ‚owni', quote: 'PotrafiÄ™ zÅ‚oÅ¼yÄ‡ szafÄ™, a potem zrobiÄ‡ szpagat na jej blacie. Moja elastycznoÅ›Ä‡ nie zna granic, ani w Å¼yciu, ani w zwiÄ…zku.', category: 'wszechstronni', image: 'foty/man11.jpg', lifeQuote: '"Granice sÄ… po to, Å¼eby je rozciÄ…gaÄ‡."', confirmationBlurb: 'jest elastyczny jak nikt inny. Z nim znajdziecie rozwiÄ…zanie na kaÅ¼dy problem i wyjÅ›cie z kaÅ¼dej sytuacji.' },
    { id: 12, name: 'Igor WrÃ³bel', nickname: 'Iskra', age: 'ğŸ‚ 42', education: 'ğŸ“ UkoÅ„czyÅ‚ kursy spawania TIG/MIG/MAG', quote: 'ÅÄ…czÄ™ metale w nierozerwalne caÅ‚oÅ›ci. MyÅ›lÄ™, Å¼e z nami mogÅ‚oby byÄ‡ podobnie. ZaiskrzyÅ‚o?', category: 'wszechstronni', image: 'foty/man12.jpg', lifeQuote: '"MiÅ‚oÅ›Ä‡ jest jak spaw - musi byÄ‡ gorÄ…ca, Å¼eby byÅ‚a trwaÅ‚a."', confirmationBlurb: 'potrafi rozpaliÄ‡ ogieÅ„. Z nim na pewno zaiskrzy, a wasz zwiÄ…zek bÄ™dzie spojony na staÅ‚e.' },
];

const rejectionArguments = [
    "Ten facet potrafi wymieniÄ‡ uszczelkÄ™ pod gÅ‚owicÄ… i uszczelkÄ™ w kranie. Taki skarb siÄ™ nie odrzuca!",
    "PomyÅ›l o tych wszystkich niedokrÄ™conych szafkach w Twoim domu. On jest rozwiÄ…zaniem.",
    "Jego mÄ™ski zapach to mieszanka potu, smaru i determinacji. Gdzie indziej znajdziesz taki bukiet?",
    "On nie pyta, on dziaÅ‚a. Jak Chuck Norris, tylko z mÅ‚otkiem zamiast kopniaka z pÃ³Å‚obrotu.",
    "Z nim nigdy nie bÄ™dziesz musiaÅ‚a prosiÄ‡ sÄ…siada o pomoc w noszeniu ciÄ™Å¼kich zakupÃ³w. On jest chodzÄ…cÄ… siÅ‚owniÄ….",
    "Prawdopodobnie ma na sobie flanelowÄ… koszulÄ™. Czy trzeba dodawaÄ‡ coÅ› wiÄ™cej?",
];

const videoCallMessages = [
    "Dobrze, Å¼e odebraÅ‚aÅ›. Jestem w stanie zrobiÄ‡ to zlecenie, tutaj masz fajny filmik, ktÃ³ry duÅ¼o pomoÅ¼e.",
    "Halo, halo! JuÅ¼ myÅ›laÅ‚em, Å¼e siÄ™ nie poÅ‚Ä…czymy. Zanim przejdziemy do konkretÃ³w, obejrzyj to, to waÅ¼ne.",
    "Super, jesteÅ›! PosÅ‚uchaj, to jest instrukcja, jak przygotowaÄ‡ miejsce pracy. Zobacz i dziaÅ‚amy dalej.",
];

const chatInitMessages = [
    "Dobra, pani, co ci na duszy gra? MoÅ¼e remont Å‚azienki?",
    "No, jestem. O co chodzi? Fugi w kuchni do wymiany?",
    "SÅ‚ucham. MÃ³w, bo robota czeka, a ja tu w telefon klikam.",
    "Jestem, ale siÄ™ nie cieszÄ™. Jaka jest awaria tym razem?",
    "Telefon od ciebie to jak wezwanie do usterki. Co siÄ™ zepsuÅ‚o?",
    "Centrala zgÅ‚oÅ› siÄ™. Jaki problem do rozwiÄ…zania na dziÅ›?",
    "CzeÅ›Ä‡. KrÃ³tko i na temat, bo czas to pieniÄ…dz, a ja nie mam ani jednego, ani drugiego.",
    "MÃ³w, co trzeba zrobiÄ‡. Tylko bez marudzenia, Å¼e drogo.",
];

const chatDiscourageMessages = [
    "Dobrze, Å¼e wybraÅ‚aÅ› mnie, a nie tych 'kreatywnych'. Co oni ci zrobiÄ…? UpiekÄ… ciasto? Ja ci dom postawiÄ™!",
    "Tylko nie mÃ³w, Å¼e myÅ›laÅ‚aÅ› o tych 'wszechstronnych'. Facet, ktÃ³ry zna siÄ™ na wszystkim, nie zna siÄ™ na niczym. Ja znam siÄ™ na betonie i to siÄ™ liczy.",
    "ZobaczyÅ‚em, Å¼e polubiÅ‚aÅ› teÅ¼ tego 'SÅ‚odkiego'. Daj spokÃ³j, on ci co najwyÅ¼ej lukrem Å¼ycie posmaruje. Ja je zalejÄ™ solidnym fundamentem.",
    "WybÃ³r miÄ™dzy mnÄ… a jakimÅ› 'artystÄ…' to jak wybÃ³r miÄ™dzy mÅ‚otem a pÄ™dzelkiem. Czym wbijesz gwÃ³ÅºdÅº?",
    "Ci 'elastyczni' to siÄ™ wyginajÄ… we wszystkie strony, bo nie majÄ… krÄ™gosÅ‚upa. Ja mam krÄ™gosÅ‚up moralny i stalowy prÄ™t w kieszeni. Na wszelki wypadek.",
    "SÅ‚yszaÅ‚em, Å¼e ten 'Francuz' jest popularny. Pewnie, dopasuje siÄ™. Ja nie muszÄ™ siÄ™ dopasowywaÄ‡, ja tworzÄ™ rzeczywistoÅ›Ä‡ pod siebie. I pod ciebie.",
    "Nie daj siÄ™ nabraÄ‡ na tych 'designerÃ³w'. Oni ci zaprojektujÄ… Å‚adnÄ… poraÅ¼kÄ™. Ja ci zbudujÄ™ brzydkie zwyciÄ™stwo, ktÃ³re przetrwa lata.",
    "Dobry wybÃ³r. Prawdziwy facet brudzi sobie rÄ™ce, a nie posypuje babeczki brokatem.",
    "WidzÄ™, Å¼e masz gust. Z dala od tych, co zamiast klucza 13-tki noszÄ… w torbie notesik na wiersze.",
    "CaÅ‚e szczÄ™Å›cie. Tamci 'smakosze' znajÄ… siÄ™ na przyprawach. Ja znam siÄ™ na proporcjach cementu do piasku. Zgadnij, co jest waÅ¼niejsze.",
    "Zapomnij o reszcie. Oni ci zaoferujÄ… 'doÅ›wiadczenie'. Ja ci zaoferujÄ™ solidnÄ…, ciÄ™Å¼kÄ… i satysfakcjonujÄ…cÄ… robotÄ™.",
    "JesteÅ› mÄ…drÄ… kobietÄ…. Wiesz, Å¼e prawdziwa miÅ‚oÅ›Ä‡ pachnie smarem, a nie waniliÄ….",
    "Uff, juÅ¼ myÅ›laÅ‚em, Å¼e pÃ³jdziesz do tych od jogi. Ja ciÄ™ tak rozciÄ…gnÄ™, Å¼e zapomnisz jak siÄ™ nazywasz... przy remoncie oczywiÅ›cie.",
];
    const chatEmoteMessages = ["ğŸ‘", "ğŸ’ª", "ğŸ˜‰", "ğŸ˜", "ğŸ˜", "ğŸ‘·â€â™‚ï¸", "ğŸ’¯", "ğŸ‘Œ", "ğŸ»"];
    const chatExcuseMessages = [ "Dobra, koÅ„czÄ™ na dziÅ›. Jestem na kacu i muszÄ™ iÅ›Ä‡ spaÄ‡.", "Sory, Å¼ona mnie woÅ‚a na obiad. MuszÄ™ lecieÄ‡.", "Jeszcze wrÃ³cÄ™, kotku. Teraz majster musi odpoczÄ…Ä‡.", "KoÅ„czymy, bo mi siÄ™ piwo grzeje. Do nastÄ™pnego.", "MuszÄ™ spadaÄ‡, wezwali mnie do pilnej awarii. Rura pÄ™kÅ‚a. GdzieÅ›.", "ZadzwoniÄ™ pÃ³Åºniej, teraz leci 'Familiada'.", ];
    const conversionVideos = { solidni: 'https://www.youtube.com/embed/TfZQcDo5wVk?si=Tm7xoiMdGhbEJT7_', kreatywni: 'https://www.youtube.com/embed/SrAUdR3cVGQ?si=gKgZqOL-1HmY6ibK', wszechstronni: 'https://www.youtube.com/embed/1mNH_gwxu2g?si=Jl0Ye3rjnDj5UL8I' };

    let currentState = { currentProfile: null, currentCategory: null, history: ['screen-landing'] };
    let ukochani = []; 
    let chatStates = {};
    const allScreens = document.querySelectorAll('.screen');
    const youtubePlayer = document.getElementById('youtube-player');
    const banOverlay = document.getElementById('chat-ban-full-overlay');

    function initLandingPageAnimations() {
        const container = document.getElementById('landing-page-hearts');
        const button = document.getElementById('main-enter-button');
        if (!container || !button) return;
        const buttonRect = button.getBoundingClientRect();
        const targetX = buttonRect.left + buttonRect.width / 2;
        const targetY = buttonRect.top + buttonRect.height / 2;
        for (let i = 0; i < 20; i++) {
            const heart = document.createElement('div');
            heart.className = 'flying-heart';
            heart.innerHTML = 'â™¥';
            const startX = Math.random() < 0.5 ? -50 : window.innerWidth + 50;
            const startY = Math.random() * window.innerHeight;
            heart.style.left = `${startX}px`;
            heart.style.top = `${startY}px`;
            const transX = targetX - startX;
            const transY = targetY - startY;
            heart.style.setProperty('--tx', `translateX(${transX}px)`);
            heart.style.setProperty('--ty', `translateY(${transY}px)`);
            heart.style.animationDelay = `${Math.random() * 8}s`;
            container.appendChild(heart);
        }
    }
    initLandingPageAnimations();
    
    function showScreen(screenId, direction = 'forward') {
        const targetScreen = document.getElementById(screenId);
        if (!targetScreen) return;
        allScreens.forEach(screen => screen.classList.remove('active'));
        targetScreen.classList.add('active');
        if (direction === 'forward') {
            if (currentState.history[currentState.history.length - 1] !== screenId) {
                currentState.history.push(screenId);
            }
        }
        if (screenId !== 'screen-video-call' && screenId !== 'screen-conversion') {
            youtubePlayer.src = '';
            document.getElementById('conversion-video-player').src = '';
        }
    }

    document.getElementById('nav-back').addEventListener('click', (e) => { e.preventDefault(); if (currentState.history.length > 1) { currentState.history.pop(); const lastScreen = currentState.history[currentState.history.length - 1]; showScreen(lastScreen, 'back'); } });
    document.getElementById('nav-home').addEventListener('click', (e) => { e.preventDefault(); currentState.history = ['screen-landing']; showScreen('screen-landing'); });
    document.getElementById('nav-ukochani').addEventListener('click', (e) => { e.preventDefault(); renderUkochaniScreen(); showScreen('screen-ukochani'); });
    document.addEventListener('click', (e) => { if (e.target.matches('.button[data-target]')) { showScreen(e.target.dataset.target); } });
    document.querySelectorAll('.category-box').forEach(box => { box.addEventListener('click', () => { const category = box.dataset.category; currentState.currentCategory = category; renderProfileCards(category); showScreen('screen-profiles'); }); });

    function createProfileCard(profile, isLoved, context) {
        const card = document.createElement('div');
        card.className = 'profile-card';
        card.dataset.profileId = profile.id;
        
        let actionsHtml = `
            <div class="profile-card-actions">
                <button class="button select-now-btn">Wybieram teraz</button>
                <button class="heart-button">
                    <span class="heart-icon ${isLoved ? 'loved' : ''}">â™¥</span>
                </button>
            </div>`;
        
        if (context === 'ukochani') {
            actionsHtml = `<p class="quote">Kliknij, aby kontynuowaÄ‡ rozmowÄ™...</p>`;
            card.addEventListener('click', (e) => {
                if (e.target.tagName !== 'BUTTON') {
                    prepareChatScreen(profile);
                    showScreen('screen-chat');
                }
            });
        }

        card.innerHTML = `
            <img src="${profile.image}" alt="" onerror="this.outerHTML = '<div class=\\'img-placeholder\\'>brak zdjÄ™cia ${profile.image.split('/')[1]}</div>'">
            <div class="profile-card-content">
                <h3>${profile.name}</h3>
                <div class="nickname">${profile.nickname}</div>
                <hr class="separator">
                <div class="details">
                    <span>${profile.age} lat</span>
                    <span>${profile.education}</span>
                </div>
                <p class="quote">"${profile.quote}"</p>
                <p class="life-quote">${profile.lifeQuote}</p>
                ${actionsHtml}
            </div>
        `;
        return card;
    }

    function renderProfileCards(category) {
        const container = document.getElementById('profiles-container');
        container.innerHTML = '';
        profiles.filter(p => p.category === category).forEach(profile => {
            container.appendChild(createProfileCard(profile, ukochani.includes(profile.id), 'profiles'));
        });
        const conversionCard = document.createElement('div');
        conversionCard.className = 'profile-card conversion-card';
        conversionCard.innerHTML = `<h3>PokÃ³j nawrÃ³ceÅ„</h3><p>JeÅ¼eli zwÄ…tpiÅ‚aÅ› w to, Å¼e znajdziesz idealnego fachowca, to jest miejsce dla ciebie.</p><button class="button">WejdÅº do pokoju</button>`;
        conversionCard.querySelector('button').addEventListener('click', () => { showConversionRoom(category); });
        container.appendChild(conversionCard);
    }
    
    function showConversionRoom(category) {
        const videoUrl = conversionVideos[category] || conversionVideos.solidni;
        document.getElementById('conversion-video-player').src = videoUrl + '&autoplay=1';
        const heartsContainer = document.getElementById('conversion-hearts-container');
        heartsContainer.innerHTML = '';
        const colors = ['#ff6b6b', '#f9c55d', '#4ecdc4', '#45b7d1', '#f7f7f7', '#feca57', '#9b59b6', '#3498db'];
        for(let i = 0; i < 40; i++) {
            const heart = document.createElement('div');
            heart.className = 'marching-heart';
            heart.innerHTML = 'â¤';
            heart.style.color = colors[Math.floor(Math.random() * colors.length)];
            heart.style.animationName = `march-across-${(i % 3) + 1}`;
            heart.style.animationDelay = `${(i / 40) * 15}s`;
            heartsContainer.appendChild(heart);
        }
        showScreen('screen-conversion');
    }

    document.getElementById('profiles-container').addEventListener('click', e => {
        const profileCard = e.target.closest('.profile-card:not(.conversion-card)');
        if (!profileCard) return;
        const profileId = parseInt(profileCard.dataset.profileId);
        currentState.currentProfile = profiles.find(p => p.id === profileId);
        if (e.target.closest('.select-now-btn')) { renderConfirmationScreen(currentState.currentProfile); showScreen('screen-confirmation'); }
        if (e.target.closest('.heart-button')) { e.stopPropagation(); toggleHeart(e.target.closest('.heart-button'), profileId); }
    });
    
    function toggleHeart(button, profileId) { const heartIcon = button.querySelector('.heart-icon'); const isLoved = heartIcon.classList.toggle('loved'); if (isLoved) { if (!ukochani.includes(profileId)) { ukochani.push(profileId); } createHeartParticles(button); } else { ukochani = ukochani.filter(id => id !== profileId); } }
    function createHeartParticles(element) { const rect = element.getBoundingClientRect(); const originX = rect.left + rect.width / 2; const originY = rect.top + rect.height / 2; for (let i = 0; i < 20; i++) { const particle = document.createElement('div'); particle.className = 'particle'; particle.innerHTML = 'â™¥'; document.body.appendChild(particle); particle.animate([ { transform: 'translate(0, 0) scale(1)', opacity: 1 }, { transform: `translate(${(Math.random() - 0.5) * 200}px, -80vh) scale(0) rotate(${(Math.random() - 0.5) * 500}deg)`, opacity: 0 } ], { duration: 2000 + Math.random() * 3000, easing: 'ease-out', delay: Math.random() * 200 }); particle.style.left = `${originX}px`; particle.style.top = `${originY}px`; setTimeout(() => { particle.remove(); }, 5000); } }
    
    function renderConfirmationScreen(profile) { document.getElementById('confirmation-text').textContent = `${profile.name} to Å›wietny wybÃ³r!`; document.getElementById('confirmation-subtext').textContent = `${profile.nickname} ${profile.confirmationBlurb}`; }
    document.getElementById('btn-polacz-sie').addEventListener('click', () => { renderIncomingCallScreen(currentState.currentProfile); showScreen('screen-incoming-call'); });
    document.getElementById('btn-wtrashe-pisac').addEventListener('click', () => { prepareChatScreen(currentState.currentProfile); showScreen('screen-chat'); });

    function renderIncomingCallScreen(profile) { document.getElementById('call-img').src = profile.image; document.getElementById('call-nickname').textContent = profile.nickname; }
    document.getElementById('btn-accept-call').addEventListener('click', () => { document.getElementById('video-message-text').textContent = videoCallMessages[Math.floor(Math.random() * videoCallMessages.length)]; youtubePlayer.src = youtubePlayer.dataset.src + '&autoplay=1'; showScreen('screen-video-call'); });
    document.getElementById('btn-reject-call').addEventListener('click', () => { document.getElementById('rejection-argument').textContent = rejectionArguments[Math.floor(Math.random() * rejectionArguments.length)]; document.getElementById('modal-reject').classList.add('active'); });
    document.getElementById('btn-call-again').addEventListener('click', () => { document.getElementById('modal-reject').classList.remove('active'); renderIncomingCallScreen(currentState.currentProfile); showScreen('screen-incoming-call'); });
    document.getElementById('btn-prefer-write').addEventListener('click', () => { document.getElementById('modal-reject').classList.remove('active'); prepareChatScreen(currentState.currentProfile); showScreen('screen-chat'); });
    document.getElementById('btn-im-shy').addEventListener('click', () => { document.getElementById('modal-shy').classList.add('active'); });
    document.getElementById('btn-back-to-call').addEventListener('click', () => { document.getElementById('modal-shy').classList.remove('active'); });
    document.getElementById('btn-go-to-chat').addEventListener('click', () => { prepareChatScreen(currentState.currentProfile); showScreen('screen-chat'); });
    document.getElementById('btn-end-call').addEventListener('click', () => { renderProfileCards(currentState.currentCategory || 'solidni'); showScreen('screen-profiles'); });

    function prepareChatScreen(profile) {
        currentState.currentProfile = profile;
        if (!chatStates[profile.id]) { chatStates[profile.id] = { stage: 0, messages: [], isBanned: false }; }
        document.getElementById('chat-header-img').src = profile.image;
        document.getElementById('chat-header-name').textContent = `${profile.name} (${profile.nickname})`;
        renderChatMessages(profile.id);
        if (chatStates[profile.id].isBanned) { showBanScreen(); } else { banOverlay.style.display = 'none'; }
        if (chatStates[profile.id].stage === 0 && chatStates[profile.id].messages.length === 0) {
            setTimeout(() => addBotMessage(chatInitMessages[Math.floor(Math.random() * chatInitMessages.length)]), 1000);
            chatStates[profile.id].stage = 1;
        }
    }
    
    function createMessageParticles(element) { const colors = ['#ff6b6b', '#f9c55d', '#4ecdc4', '#45b7d1', '#f7f7f7', '#feca57']; for (let i = 0; i < 15; i++) { const particle = document.createElement('div'); particle.className = 'chat-particle'; particle.innerHTML = 'â™¥'; particle.style.color = colors[Math.floor(Math.random() * colors.length)]; element.appendChild(particle); const angle = Math.random() * 2 * Math.PI; const radius = 50 + Math.random() * 150; const transX = Math.cos(angle) * radius; const transY = Math.sin(angle) * radius; particle.style.left = '50%'; particle.style.top = '50%'; particle.style.setProperty('--tx', `translateX(${transX}px)`); particle.style.setProperty('--ty', `translateY(${transY}px)`); setTimeout(() => particle.remove(), 2500); } }
    function addMessageToDisplay(msg, profile) { const container = document.createElement('div'); const messageEl = document.createElement('div'); container.className = `message-container ${msg.sender}-message-container`; messageEl.className = `message ${msg.sender}-message`; messageEl.textContent = msg.text; if (msg.sender === 'bot') { const avatar = document.createElement('img'); avatar.src = profile.image; avatar.className = 'chat-avatar'; container.appendChild(avatar); container.appendChild(messageEl); setTimeout(() => createMessageParticles(container), 100); } else { container.appendChild(messageEl); } document.getElementById('chat-messages').prepend(container); }
    function addBotMessage(text) { const profileId = currentState.currentProfile.id; const msg = { sender: 'bot', text }; chatStates[profileId].messages.push(msg); addMessageToDisplay(msg, currentState.currentProfile); }
    function handleUserMessage() {
        const text = document.getElementById('chat-input').value.trim();
        if (text === '') return;
        const profileId = currentState.currentProfile.id;
        if(chatStates[profileId].isBanned) return;
        const msg = { sender: 'user', text };
        chatStates[profileId].messages.push(msg);
        addMessageToDisplay(msg, currentState.currentProfile);
        document.getElementById('chat-input').value = '';
        const state = chatStates[profileId];
        setTimeout(() => {
            switch(state.stage) {
                case 1: addBotMessage(chatDiscourageMessages[Math.floor(Math.random() * chatDiscourageMessages.length)]); state.stage = 2; break;
                case 2: addBotMessage(chatEmoteMessages[Math.floor(Math.random() * chatEmoteMessages.length)]); state.stage = 3; break;
                case 3: addBotMessage(chatExcuseMessages[Math.floor(Math.random() * chatExcuseMessages.length)]); state.stage = 4; break;
                case 4: state.isBanned = true; showBanScreen(); break;
            }
        }, 1500 + Math.random() * 1000);
    }
    document.getElementById('send-button').addEventListener('click', handleUserMessage);
    document.getElementById('chat-input').addEventListener('keypress', e => { if (e.key === 'Enter') handleUserMessage(); });
    function renderChatMessages(profileId) { const container = document.getElementById('chat-messages'); container.innerHTML = ''; if (chatStates[profileId]) { chatStates[profileId].messages.forEach(msg => { addMessageToDisplay(msg, profiles.find(p => p.id === profileId)); }); } }

    function showBanScreen() {
        banOverlay.style.display = 'flex';
        const circle = document.getElementById('ban-circle');
        if (circle.childElementCount > 0) return;
        const radius = 110;
        for (let i = 0; i < 20; i++) {
            const emoji = document.createElement('span');
            emoji.className = 'ban-emoji';
            emoji.innerHTML = 'ğŸ˜­';
            const angle = (i / 20) * 2 * Math.PI;
            emoji.style.left = `${radius + radius * Math.cos(angle)}px`;
            emoji.style.top = `${radius + radius * Math.sin(angle)}px`;
            emoji.style.transform = `rotate(${angle + Math.PI / 2}rad)`;
            circle.appendChild(emoji);
        }
    }
    document.getElementById('btn-find-new').addEventListener('click', () => { banOverlay.style.display = 'none'; document.getElementById('audio-player-container').innerHTML = ''; const musicBtn = document.getElementById('btn-play-music'); musicBtn.disabled = false; musicBtn.textContent = 'PuÅ›Ä‡ muzykÄ™'; showScreen('screen-categories'); });
    document.getElementById('btn-play-music').addEventListener('click', (e) => {
        const musicBtn = e.target;
        if (musicBtn.disabled) return;
        const playlistId = 'PLE8A15ECB9F1761FB';
        const musicUrl = `https://www.youtube.com/embed/videoseries?list=${playlistId}&autoplay=1&loop=1&index=${Math.floor(Math.random() * 10)}`;
        document.getElementById('audio-player-container').innerHTML = `<iframe src="${musicUrl}" allow="autoplay" hidden></iframe>`;
        musicBtn.textContent = 'Muzyka gra...';
        musicBtn.disabled = true;
        setTimeout(() => {
            musicBtn.disabled = false;
            musicBtn.textContent = 'PuÅ›Ä‡ ponownie';
        }, 3000);
    });

    function renderUkochaniScreen() {
        const emptyView = document.getElementById('ukochani-empty');
        const listContainer = document.getElementById('ukochani-list-container');
        listContainer.innerHTML = '';
        if(ukochani.length === 0) {
            emptyView.style.display = 'flex';
            listContainer.style.display = 'none';
        } else {
            emptyView.style.display = 'none';
            listContainer.style.display = 'grid';
            profiles.filter(p => ukochani.includes(p.id)).forEach(profile => {
                listContainer.appendChild(createProfileCard(profile, true, 'ukochani'));
            });
        }
    }
    document.getElementById('btn-znajdz-chlopaka').addEventListener('click', () => { showScreen('screen-categories'); });
});
</script>

</body>
</html>
